# Contributing to Hikvision Firmware Archive

Thank you for your interest in contributing! This guide will help you understand how to add firmwares, report issues, and improve the archive.

## Ways to Contribute

### 1. Report Missing Firmwares

If you know of a firmware that should be in this archive:

1. **Check if it's already reported**: Look in `missing.txt` to see if someone else has already reported it
2. **Add to missing.txt**: If not listed, add a line with:
   ```
   Model: DS-2CD2XXX | Hardware: IPC_G0 | Version: 5.7.0 | Source: Official site
   ```
3. **Open an issue**: Provide as much detail as possible:
   - Device model (exact model number)
   - Hardware version
   - Firmware version
   - Where you found it (URL, support email, etc.)
   - Download link if available

### 2. Manually Add Firmwares

If you have a firmware download link, you can add it directly:

#### Using the Command Line Tool

```bash
python main.py add "https://example.com/firmware.dav" \
  --model "DS-2CD2XXX" \
  --hw-version "IPC_G0" \
  --version "5.7.0" \
  --date "2023-01-15" \
  --changes "Bug fixes and stability improvements" \
  --notes "Official release"
```

#### Manual JSON Editing

You can also edit `firmwares_manual.json` directly:

```json
{
  "DS-2CD2XXX_IPC_G0_5.7.0": {
    "device_id": 100001,
    "model": "DS-2CD2XXX",
    "hardware_version": "IPC_G0",
    "version": "5.7.0",
    "date": "2023-01-15",
    "download_url": "https://example.com/firmware.dav",
    "changes": "Bug fixes",
    "notes": "Official release",
    "is_beta": false,
    "source": "manual"
  }
}
```

**Important**: Make sure the device exists in `devices.json` first, or the scraper will create it automatically.

### 3. Improve the Scraper

The scraper (`main.py`) needs constant updates as Hikvision changes their website:

- **Better parsing**: Improve model/version extraction from filenames
- **More categories**: Add support for additional product lines
- **Error handling**: Handle edge cases and different page layouts
- **Rate limiting**: Be respectful of Hikvision's servers

### 4. Fix Documentation

- Update `readme_header.md` for better explanations
- Improve `QUICKSTART.md` with clearer instructions
- Add examples and troubleshooting tips

## File Structure

### `devices.json`

Maps device models and hardware versions to unique IDs:

```json
{
  "100001": {
    "model": "DS-2CD2XXX",
    "hardware_version": "IPC_G0"
  }
}
```

**Rules**:
- Use IDs starting from 100000
- Each unique model+hardware combination gets a new ID
- Don't modify existing IDs (breaks firmware references)

### `firmwares_live.json`

Firmwares scraped from Hikvision's website. **Don't edit this manually** - it's auto-generated.

### `firmwares_manual.json`

Manually added firmwares. This is where you add:
- Beta firmwares
- Archived links
- Firmwares from support emails
- Third-party mirrors

### `firmware_info.json`

Additional metadata about firmware files:
- File size
- Checksums
- Beta/unstable flags
- Additional notes

### `readme_header.md`

The header section of the README. Edit this to change the documentation.

### `README.md`

**Don't edit this** - it's auto-generated by `release.py`.

## Development Setup

1. **Clone the repository**:
   ```bash
   git clone https://github.com/JoeyGE0/hikvision-fw-archive.git
   cd hikvision-fw-archive
   ```

2. **Install dependencies**:
   ```bash
   pip install -r requirements.txt
   ```

3. **Test the scraper**:
   ```bash
   python main.py scrape
   ```

4. **Generate README**:
   ```bash
   python release.py
   ```

## Pull Request Process

1. **Fork the repository**
2. **Create a branch** for your changes
3. **Make your changes**:
   - Add firmwares to `firmwares_manual.json`
   - Update documentation
   - Improve scraper code
4. **Test your changes**:
   - Run `python main.py scrape` to test scraper
   - Run `python release.py` to regenerate README
   - Verify JSON files are valid
5. **Commit and push**:
   ```bash
   git add .
   git commit -m "Add firmware for DS-2CD2XXX"
   git push origin your-branch
   ```
6. **Open a Pull Request** with a clear description

## Code Style

- Use Python 3.11+ features
- Follow PEP 8 style guide
- Add docstrings to functions
- Include error handling
- Add logging for debugging

## Questions?

- Open an issue for bugs or questions
- Check existing issues before creating new ones
- Be respectful and constructive in discussions

Thank you for contributing! ðŸŽ‰
